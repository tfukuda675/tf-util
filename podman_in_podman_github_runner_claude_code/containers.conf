# Podmanは以下の順で containers.conf を読み込みます：
#/etc/containers/containers.conf（システム全体）
#$HOME/.config/containers/containers.conf（ユーザー設定）
# ユーザーごとに指定するか、コンテナの中では。
# mkdir -p ~/.config/containers
# cp containers.conf ~/.config/containers/containers.conf

[engine]
cgroup_manager = "cgroupfs"           # systemd ではなく cgroupfs を使う
events_logger = "file"                # journald を使わずログをファイル出力
log_level = "warn"                    # ログ出力レベル
num_locks = 2048                      # コンテナ同時実行数を増やす場合に調整

[containers]
log_driver = "k8s-file"               # もしくは "json-file"
pids_limit = 0                        # 無制限にする（ランナー環境向け）
shm_size = "65536k"                   # /dev/shm のサイズ指定（小さめ）

[network]
network_backend = "netavark"          # rootless Podmanでは netavark 推奨


# Podman-in-Podman で役立つポイント
#設定項目                   意味
#cgroup_manager	            rootless では cgroupfs を使用
#network_backend	        netavark or cni、rootlessなら netavark
#log_driver	                コンテナログの出力方式（CIには json-file もOK）
#pids_limit	                0 にすると制限なし
# events_logger	            file にして journald 不要に
